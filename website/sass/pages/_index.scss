@mixin index-content {
  @include content($project-article-width + 2 * $page-side-padding);
}

@mixin index-paragraph {
  @include large-screen {
    max-width: $paragraph-width-large-screen;
    margin: 0 auto;
  }
}

#index {
  #intro {
    @include index-content;

    margin-top: $big-spacer-height;

    @include clearfix;

    > img,
    > div,
    > h1 {
      @include large-screen {
        float: left;
      }
    }

    > img {
      width: 90px;  // TODO: remove once image is correct size
      margin-top: 1em;
    }
  }

  .text-bubble-origin {
    background: url("images/text-bubble-origin.png");

    width: 16px;
    height: 16px;

    margin: 0 auto;

    @include large-screen {
      margin: 3.8em 0 0 1em;

      @include transform(rotate(-90deg));
    }
  }

  h1 {
    // For nicer text layout
    max-width: 18.5em;
    margin: 0 auto;

    background-color: white;
    border-radius: 0.3em;

    padding: 0.2em;

    > p {
      font-size: inherit;
      text-align: center;
      line-height: 1.25em;

      margin: 0;

      &:first-child {
        margin-bottom: $paragraph-default-margin;
      }
    }
  }

  h2 {
    text-align: center;
  }

  #i-can {
    > h2 {
      margin-top: $big-spacer-height;
    }

    > div {
      @include index-content;
      @include index-paragraph;
    }
  }

  #projects {
    // To keep a bit of space on each side on small screens
    > h2 {
      $h2-padding: $page-side-padding * $font-size-base / $font-size-h3;
      padding: 0 $h2-padding;
    }

    > div {
      margin: 0 auto;

      text-align: center;

      // To have text centered on small screens.
      max-width: $project-article-width + 2 * $page-side-padding;

      @include large-screen {
        // In some cases we don't want the size to exceed a certain width on bigger screens to make sure the content is always readable
        max-width: $large-screen-min-width;
      }
    }

    ul {
      display: inline;

      list-style-type: none;
      padding: 0;
      margin: 0;
    }

    li {
      @include large-screen {
        // Overriding $font-size-body-large-screen
        font-size: $font-size-base;
        display: inline-block;
      }

      margin: 0 $page-side-padding $big-spacer-height/2 $page-side-padding;

      // TODO: remove once images are correct size
      max-width: 452px;

      &:last-child {
        margin-bottom: 0;
      }

      > a {
        // Otherwise the anchor expands beyond $large-screen-min-width
        display: block;
      }
    }

    h3 {
      margin-top: 0;
      text-align: center;
    }

    img {
      /* TODO Commented because of visual glitch
      @include transition(opacity 600ms ease 0s); */

      &:hover {
        @include large-screen {
          opacity: 0.8;
        }
      }
    }

    // TODO: remove once images are correct size
    #train-damage-item {
      img {
        $article-width: 452;
        $image-width-hdpi: 332;

        max-width: percentage($image-width-hdpi / 2 / $article-width);
      }
    }
  }

  #experience {
    > article,
    > div {
      @include index-content;
      @include index-paragraph;
    }

    h3 {
      margin-bottom: 0.2em;
    }

    p {
      margin-top: 0;
    }

    > p {
      margin-top: 2em;
    }
  }
}