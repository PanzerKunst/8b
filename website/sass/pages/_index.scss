@mixin index-content {
  @include content($project-article-width + 2 * $page-side-padding);
}

@mixin index-paragraph {
  @include large-screen {
    max-width: $paragraph-width-large-screen;
    margin: 0 auto;
  }
}

#index {
  #intro {
    @include index-content;

    margin-top: $big-spacer-height;

    @include clearfix;

    > img,
    > div,
    > h1 {
      @include large-screen {
        float: left;
      }
    }

    > img {
      width: 90px;
      margin-top: 1em;
    }
  }

  .text-bubble-origin {
    background: url("images/text-bubble-origin.png");

    width: 16px;
    height: 16px;

    margin: 0 auto;

    @include large-screen {
      margin: 3.8em 0 0 1em;

      @include transform(rotate(-90deg));
    }
  }

  h1 {
    // For nicer text layout
    max-width: 18.5em;
    margin: 0 auto;

    background-color: white;
    border-radius: 0.3em;

    padding: 0.2em;

    > p {
      font-size: inherit;
      text-align: center;
      line-height: 1.25em;

      margin: 0;

      &:first-child {
        margin-bottom: $paragraph-default-margin;
      }
    }
  }

  h2 {
    text-align: center;
  }

  #i-can {
    > h2 {
      margin-top: $big-spacer-height;
    }

    > div {
      @include index-content;
      @include index-paragraph;
    }
  }

  #projects {
    // To keep a bit of space on each side on small screens
    > h2 {
      $h2-padding: $page-side-padding * $font-size-base / $font-size-h3;
      padding: 0 $h2-padding;
    }

    > div {
      @include index-content;
    }

    article {
      @include large-screen {
        max-width: $project-article-width;
      }
    }

    h3 {
      margin-top: 0;
      text-align: center;
    }

    img {
      /* TODO Commented because of visual glitch
      @include transition(opacity 600ms ease 0s); */

      width: 100%;

      &:hover {
        @include large-screen {
          opacity: 0.8;
        }
      }
    }
  }

  // Otherwise the anchor expands beyond $large-screen-min-width
  .project-pic-anchor {
    display: block;
  }

  .several-projects {
    @include large-screen {
      display: inline-block;

      // Otherwise the element is aligned to the bottom because of display inline-block
      vertical-align: top;
    }

    margin-bottom: $big-spacer-height / 2;
  }

  .lonely-project {
    display: block;
    margin: 0 auto;

    img {
      $article-width: 452;
      $image-width-hdpi: 332;

      max-width: percentage($image-width-hdpi / 2 / $article-width);
    }
  }

  #appear-showroom-article {
    @media screen and (min-width: $large-screen-mq-breakpoint) {
      margin-right: $project-article-separator-width;
    }
  }

  #experience {
    > article,
    > div {
      @include index-content;
      @include index-paragraph;
    }

    h3 {
      margin-bottom: 0.2em;
    }

    p {
      margin-top: 0;
    }

    > p {
      margin-top: 2em;
    }
  }
}